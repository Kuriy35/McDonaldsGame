<UserControl x:Class="McDonalds.Views.ProductSlot"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="135" d:DesignWidth="135"
             Width="135" Height="135">
    <Border Background="White" 
            BorderThickness="1" 
            CornerRadius="6" 
            Padding="3"
            Margin="2">
        <Border.Style>
            <Style TargetType="Border">
                <Setter Property="BorderBrush" Value="#E0E0E0"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsNewAdded, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                 Value="True">
                        <DataTrigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation 
                                        Storyboard.TargetProperty="BorderBrush.Color"
                                        To="#4CAF50" 
                                        Duration="0:0:0.3"
                                        AutoReverse="True"/>
                                    <DoubleAnimation 
                                        Storyboard.TargetProperty="RenderTransform.ScaleX"
                                        From="1.0" To="1.1" Duration="0:0:0.2"
                                        AutoReverse="True"/>
                                    <DoubleAnimation 
                                        Storyboard.TargetProperty="RenderTransform.ScaleY"
                                        From="1.0" To="1.1" Duration="0:0:0.2"
                                        AutoReverse="True"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.EnterActions>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ProductState, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                 Value="Ready">
                        <Setter Property="BorderBrush" Value="#4CAF50"/>
                        <Setter Property="BorderThickness" Value="2"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Border.Style>
        <Border.Effect>
            <DropShadowEffect BlurRadius="5" ShadowDepth="1" Opacity="0.2"/>
        </Border.Effect>
        <Border.RenderTransform>
            <ScaleTransform ScaleX="1" ScaleY="1"/>
        </Border.RenderTransform>
        <Border.RenderTransformOrigin>
            <Point X="0.5" Y="0.5"/>
        </Border.RenderTransformOrigin>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="40"/>
                <RowDefinition Height="40"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Image Grid.Row="1" 
                   Source="{Binding ProductIcon, RelativeSource={RelativeSource AncestorType=UserControl}}"
                   Stretch="Uniform"
                   Width="36"
                   Height="36"
                   MaxHeight="36"
                   Margin="0,2"/>
            <TextBlock Grid.Row="2" 
                       Text="{Binding ProductName, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                       FontSize="12" 
                       FontWeight="SemiBold"
                       HorizontalAlignment="Center"
                       TextWrapping="Wrap"
                       TextTrimming="CharacterEllipsis"
                       MaxWidth="90"
                       TextAlignment="Center"
                       Foreground="#333333"
                       Margin="0,2,0,0"/>
            <Border Grid.Row="3" 
                    Background="#F5F5F5"
                    CornerRadius="6"
                    Padding="4,2"
                    Margin="0,2,0,0"
                    HorizontalAlignment="Center">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="x " 
                               FontSize="10" 
                               FontWeight="Bold"
                               Foreground="#666666"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding Quantity, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                               FontSize="12" 
                               FontWeight="Bold"
                               Foreground="#2196F3"
                               VerticalAlignment="Center">
                    </TextBlock>
                </StackPanel>
            </Border>
            <Ellipse 
                     Width="15" 
                     Height="15"
                     HorizontalAlignment="Right"
                     VerticalAlignment="Center">
                <Ellipse.Style>
                    <Style TargetType="Ellipse">
                        <Setter Property="Fill" Value="#E0E0E0"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ProductState, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                         Value="Ready">
                                <Setter Property="Fill" Value="#4CAF50"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Ellipse.Style>
            </Ellipse>
        </Grid>
    </Border>
</UserControl>